# Сценарії використання

## UserRegistration

| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| UserRegistration       | Реєстрація нового користувача          | Користувач, система | Користувач не має облікового запису в системі | Система створює новий обліковий запис і зберігає реєстраційні дані користувача | Некоректні дані – InvalidDataException<br>Користувач уже зареєстрований – AlreadyRegisteredException | 1. Користувач відкриває сторінку реєстрації. 2. Вносить необхідні дані. 3. Система перевіряє введену інформацію. 4. Система створює обліковий запис. 5. Користувач отримує повідомлення. |

```plantuml
@startuml
actor Користувач as user

rectangle {
  user -down-> (Відкрити сторінку реєстрації)
  (Відкрити сторінку реєстрації) --> (Внести необхідні дані)
  (Внести необхідні дані) --> (Перевірити введену інформацію)
  (Перевірити введену інформацію) --> (Створити обліковий запис)
  (Створити обліковий запис) --> (Надіслати повідомлення)
}

note right of (Перевірити введену інформацію)
  Перевірка на:
  - унікальність email
  - коректність даних
  - заповненість обов'язкових полів
end note

@enduml
```

## UserLogin
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| UserLogin             | Вхід у систему                          | Користувач, система | Користувач уже має обліковий запис | Користувач успішно входить до системи | Некоректні дані – InvalidDataException | 1. Користувач вводить логін та пароль. 2. Система перевіряє правильність. 3. Користувач отримує доступ. |

```plantuml
@startuml
top to bottom direction  
actor Користувач as user

rectangle {
  user --> (Ввести логін та пароль)
  (Ввести логін та пароль) --> (Перевірити правильність даних)
  (Перевірити правильність даних) --> (Надати доступ)
}

note right of (Перевірити правильність даних)
  Перевірка включає:
  - відповідність логіна
  - валідність пароля
  - статус облікового запису
end note

@enduml
```

## SurveyCreate
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyCreate          | Створення нового опитування             | Користувач, система | Користувач має обліковий запис і права | Опитування успішно збережено | Порожнє опитування – EmptySurveyException | 1. Користувач заповнює форму. 2. Система перевіряє дані. 3. Опитування збережено. |

```plantuml
@startuml
top to bottom direction
actor "Користувач" as user

rectangle {
  user -down-> (Заповнити форму)
  (Заповнити форму) -down-> (Перевірити дані)
  (Перевірити дані) -down-> (Зберегти опитування)
}

note right of (Перевірити дані)
  Перевірка включає:
  - валідність даних
  - заповненість обов'язкових полів
  - унікальність ідентифікатора
end note

@enduml
```


## UserCompletesSurvey
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| UserCompletesSurvey   | Заповнення опитування                   | Користувач, система | Користувач має доступ до опитування | Відповіді збережені | Пропущені обов’язкові питання – IncompleteSurveyException | 1. Користувач відкриває анкету. 2. Заповнює відповіді. 3. Система перевіряє та зберігає. |

```plantuml
@startuml
top to bottom direction
actor "Користувач" as user

rectangle {
  user -down-> (Відкрити анкету)
  (Відкрити анкету) -down-> (Заповнити відповіді)
  (Заповнити відповіді) -down-> (Перевірити дані)
  (Перевірити дані) -down-> (Зберегти результати)
}

note right of (Відкрити анкету)
  Анкета містить:
  - Питання
  - Варіанти відповідей
  - Таймер (якщо є)
end note

note left of (Перевірити дані)
  Перевірка:
  - Чи всі обов'язкові поля заповнені
  - Валідність відповідей
  - Час виконання (якщо є обмеження)
end note

note right of (Зберегти результати)
  Зберігається:
  - Відповіді користувача
  - Час завершення
  - Ідентифікатор сесії
end note

@enduml

```


## UserEditResponses
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| UserEditResponses     | Редагування відповідей                  | Користувач, система | Користувач пройшов опитування | Відредаговані відповіді збережені | Некоректні дані – InvalidResponseException<br>Опитування закрите – SurveyClosedException | 1. Користувач редагує відповіді. 2. Система перевіряє коректність. 3. Зміни збережені. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome true
actor "Користувач" as user

rectangle {
  user -down-> (Редагувати відповіді)
  (Редагувати відповіді) -down-> (Перевірити коректність)
  (Перевірити коректність) -down-> (Зберегти зміни)
}

note right of (Редагувати відповіді) 
  Доступні дії:
  - Зміна варіантів відповідей
  - Редагування тексту
  - Видалення відповідей
end note

note left of (Перевірити коректність)
  Критерії перевірки:
  - Формат даних
  - Обов'язкові поля
  - Логічні обмеження
  - Унікальність (якщо потрібно)
end note

@enduml
```

## SurveyResultsView
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyResultsView     | Перегляд відповідей                     | Користувач, система | Опитування завершене | Звіт сформований | Відсутність достатньої кількості відповідей | 1. Користувач відкриває результати. 2. Система обробляє дані. 3. Формується звіт. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome true
skinparam shadowing false

actor "Користувач" as user

rectangle {
  user -down-> (Відкрити результати)
  (Відкрити результати) -down-> (Обробити дані)
  (Обробити дані) -down-> (Сформувати звіт)
}

note left of (Обробити дані)
  Процеси обробки:
  - Фільтрація
  - Агрегація
  - Статистичний аналіз
  - Нормалізація
end note

@enduml
```

## SurveyResultsExport
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyResultsExport   | Експорт результатів                     | Користувач, система | Опитування завершене | Користувач отримує файл | Некоректний формат – UnsupportedFormatException | 1. Користувач обирає формат. 2. Система генерує файл. 3. Користувач отримує його. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome true
skinparam shadowing false
skinparam defaultFontSize 14

actor "Користувач" as user

rectangle {
  user -down-> (Обрати формат)
  (Обрати формат) -down-> (Згенерувати файл) 
  (Згенерувати файл) -down-> (Отримати файл) 

}


note right of (Згенерувати файл)
  Процес генерації:
  - Вибірка даних
  - Форматування
  - Стиснення
  - Створення файлу
end note

@enduml
```
## SurveyUpdate
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyUpdate         | Оновлення опитування                     | Користувач, система | Опитування не завершене | Опитування оновлене | Опитування вже активне – зміни неможливі | 1. Користувач редагує опитування. 2. Система зберігає зміни. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome true
skinparam shadowing false
skinparam defaultFontSize 14
skinparam roundcorner 10

actor "Користувач" as user #lightblue

rectangle {
  user -down-> (Редагування опитування)
  (Редагування опитування) -down-> (Збереження змін)
}

note right of (Редагування опитування)
  **Доступні зміни**:
  - Назва опитування
  - Текст питань
  - Варіанти відповідей
  - Налаштування доступу
end note


@enduml
```
## SurveyFeedback
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyFeedback       | Надання відгуку                         | Користувач, система | Користувач пройшов опитування | Відгук збережений | Технічні проблеми – FeedbackSaveError | 1. Користувач залишає відгук. 2. Система зберігає його. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome false
skinparam shadowing false
skinparam defaultFontSize 14
skinparam roundcorner 15
skinparam actorStyle awesome

actor "Користувач" as user

rectangle {
  user -down-> (Залишити відгук)
  (Залишити відгук) -down-> (Обробити відгук)
  (Обробити відгук) -down-> (Зберегти відгук)
}

@enduml
```

## SurveyShareAccess
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyShareAccess    | Надання доступу                         | Користувач, система | Користувач – автор опитування | Доступ наданий | Немає прав на надання доступу | 1. Користувач отримує посилання для спільного доступу. 2. Передає його іншим користувачам. |

```plantuml
@startuml
top to bottom direction
skinparam monochrome false
skinparam shadowing false
skinparam defaultFontSize 14
skinparam roundcorner 15
skinparam actorStyle awesome

actor "Користувач" as author

rectangle {
  (Отримати посилання) -up-> author 
  author -down-> (Надіслати посилання) 
}

note left of (Отримати посилання)
  **Властивості посилання**:
  - Унікальний ідентифікатор
  - Термін дії
  - Рівень доступу
  - Кількість використань
end note

@enduml
```

## SurveyReminder
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyReminder       | Нагадування про опитування              | Користувач, система | Є активне опитування | Користувач отримує нагадування | Немає активних опитувань – NoPendingSurveysException | 1. Система перевіряє стан опитувань. 2. Надсилає нагадування користувачу. |

```plantuml
@startuml
actor Користувач as user

rectangle {
  (Перевірити стан опитувань) as check_polls
  (Надіслати нагадування) as send_reminder
  
  user --> check_polls
  check_polls --> send_reminder
}

note right of check_polls
  Перевірка на:
  - наявність активних опитувань
  - час останнього нагадування
  - термін завершення опитування
end note

@enduml
```

## SurveyStatsCollection
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyStatsCollection| Збір статистики                         | Адміністратор, система | Адміністратор хоче переглянути статистику | Генерується звіт | Дані недоступні – DataNotAvailableException | 1. Адміністратор відкриває статистику. 2. Система формує звіт. |

```plantuml
@startuml
actor Адміністратор as admin

rectangle {
  (Відкрити статистику) as open_stats
  (Сформувати звіт) as generate_report
  (Показати звіт) as display_report
  
  admin --> open_stats
  open_stats --> generate_report
  generate_report --> display_report
}

note right of generate_report
  Звіт включає:
  - кількість опитувань
  - кількість відповідей
  - активність користувачів
  - графіки та діаграми
end note

@enduml
```

## SurveyClose
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyClose         | Завершення опитування                    | Користувач, система | Опитування неактивне або завершене | Доступ закритий | Опитування ще активне – CloseNotAllowedException | 1. Користувач завершує опитування. 2. Система закриває доступ. |

```plantuml
@startuml
actor Користувач as user

rectangle {
  (Завершити опитування) as complete_poll
  (Закрити доступ) as close_access
  
  user -down-> complete_poll
  complete_poll -down-> close_access
}

note right of complete_poll
  Умови завершення:
  - досягнуто ліміт відповідей
  - закінчився термін
  - ручне завершення
end note

note left of close_access
  Дії системи:
  - змінює статус опитування
  - блокує форму відправки
  - архівує результати
end note
@enduml
```

## SurveyInvitationSend
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| SurveyInvitationSend | Надсилання запрошення                    | Користувач, система | Користувач створив опитування | Запрошення надіслано | Помилка відправки – EmailSendException | 1. Користувач вводить e-mail. 2. Система надсилає запрошення. |

```plantuml
@startuml
actor Користувач as user

rectangle {
  (Ввести email) as enter_email
  (Перевірити email) as validate_email
  (Надіслати запрошення) as send_invite
  (Показати підтвердження) as show_confirmation
  
  user -down-> enter_email
  enter_email -down-> validate_email
  validate_email -down-> send_invite
  send_invite -down-> show_confirmation
}

note right of validate_email
  Перевірка:
  - формат адреси
  - унікальність
  - домен
end note

@enduml
```

## AdminRightsGrant
| ID                      | Назва                                   | Учасники          | Передумови                                 | Результат                                     | Виключні ситуації                          | Основний сценарій |
|-------------------------|-----------------------------------------|-------------------|--------------------------------------------|----------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AdminRightsGrant    | Надання адміністративних прав            | Адміністратор, система | Користувач не є адміністратором | Користувач отримує права | Користувач вже адміністратор – UserAlreadyAdminException | 1. Адміністратор надає права користувачу. 2. Система підтверджує зміни. |

```plantuml
@startuml
actor Адміністратор as admin

rectangle {
  (Надати права) as grant_access
  (Перевірити права) as verify_access
  (Оновити профіль) as update_profile
  (Надіслати підтвердження) as send_notification
  
  admin -down-> grant_access
  grant_access -down-> verify_access
  verify_access -down-> update_profile
  update_profile -down-> send_notification
}

note right of verify_access
  Перевірка:
  - рівень доступу адміна
  - валідність прав
  - історія змін
end note

@enduml
```

